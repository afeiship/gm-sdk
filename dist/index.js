/**
 *  name: @feizheng/gm-sdk
 *  description: Sdk for tampermonkey based on jQuery/nx.
 *  homepage: https://github.com/afeiship/gm-sdk
 *  version: 1.1.6
 *  date: 2020-10-20T07:49:07.432Z
 *  license: MIT
 */

!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}function n(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})})),e}var i=e((function(e,n){(function(){var i,r,o,s,c,u,a="object"==typeof t&&t&&t.Object===Object&&t,_="object"==typeof self&&self&&self.Object===Object&&self,f=a||_||Function("return this")(),h=n&&!n.nodeType&&n,l=h&&e&&!e.nodeType&&e,p=f.nx=f.nx||{BREAKER:{},VERSION:"2.6.0",DEBUG:!1,GLOBAL:f};l?((l.exports=p).nx=p,h.nx=p):f.nx=p,i=Array.prototype,r=Object.prototype.hasOwnProperty,o=/\[(\w+)\]/g,p.noop=function(){},p.stubTrue=function(){return!0},p.stubFalse=function(){return!1},p.stubValue=function(t){return t},p.error=function(t){throw new Error(t)},p.try=function(t){try{t()}catch(t){}},p.forEach=function(t,e,n){var i,r=t.length;for(i=0;i<r&&e.call(n,t[i],i,t)!==p.BREAKER;i++);},p.forIn=function(t,e,n){var i;for(i in t)if(r.call(t,i)&&e.call(n,i,t[i],t)===p.BREAKER)break},p.each=function(t,e,n){var i,o,s=function(i,r,o){return e.call(n,i,r,t,o)===p.BREAKER};if(t)if("number"==typeof(o=t.length))for(i=0;i<o&&!s(i,t[i],!0);i++);else for(i in t)if(r.call(t,i)&&s(i,t[i],!1))break},p.map=function(t,e,n){var i=[];return p.each(t,(function(){var t=e.apply(n,arguments);if(t===p.BREAKER)return p.BREAKER;i.push(t)})),i},p.mix=function(t){var e,n,i=t||{},r=arguments;for(e=1,n=r.length;e<n;e++)p.forIn(r[e],(function(t,e){i[t]=e}));return i},p.slice=function(t,e,n){return i.slice.call(t,e,n)},p.set=function(t,e,n){for(var i=e.replace(o,"$1").split("."),r=t||p.GLOBAL,s=i.length-1,c=i[s],u=0;u<s;u++){var a=i[u],_=isNaN(+i[u+1])?{}:[];r=r[a]=r[a]||_}return r[c]=n,t},p.get=function(t,e,n){if(!e)return t;var i=e.replace(o,".$1").split("."),r=t||p.GLOBAL;return i.forEach((function(t){r=r&&r[t]})),void 0!==n&&null==r?n:r},p.path=function(t,e,n){return null==n?this.get(t,e):this.set(t,e,n)},s=function(){},c={__class_id__:0,__type__:"nx.RootClass",__base__:Object,__meta__:{},__static__:!1,__statics__:{},__properties__:{},__methods__:{},__method_init__:p.noop,__static_init__:p.noop},u={base:function(){var t,e=this.base.caller;if(e&&(t=e.__base__))return t.apply(this,arguments)},parent:function(t){var e=void 0===this.__id__,n=p.slice(arguments,1),i=e?this.__base__:this.__base__.prototype,r=this["@"+t].__type__,o=["get","set"][n.length];switch(r){case"method":return i[t].apply(this,n);case"property":return i["@"+t][o].apply(this,n)}}},c.__methods__=s.prototype=p.mix({constructor:s,init:p.noop,destroy:p.noop,toString:function(){return"[Class@"+this.__type__+"]"}},u),p.mix(c.__statics__,u),p.mix(s,c),p.mix(s,c.__statics__),p.RootClass=s,p.defineProperty=function(t,e,n,i){var r,o,s,c,u,a="@"+e,_=n&&"object"==typeof n?n:{value:n};return"value"in _?(c=_.value,u="_"+e,r=function(){return u in this?this[u]:"function"==typeof c?c.call(this):c},o=function(t){this[u]=t}):(r=n.get||t[a]&&t[a].get||p.noop,o=n.set||t[a]&&t[a].set||p.noop),a in t&&(r.__base__=t[a].get,o.__base__=t[a].set),s=t[a]={__meta__:n,__name__:e,__type__:"property",__static__:!!i,get:r,set:o,configurable:!0},Object.defineProperty(t,e,s),s},p.defineMethod=function(t,e,n,i){var r="@"+e;return t[e]=n,t[r]={__meta__:n,__name__:e,__type__:"method",__static__:!!i}},p.defineBombMethod=function(t,e,n,i){e.split(",").forEach((function(e,r){p.defineMethod(t,e,n.call(t,e,r),i)}))},p.defineMembers=function(t,e,n,i){p.forIn(n,(function(n,r){n.indexOf(",")>-1?p.defineBombMethod(e,n,r,i):p["define"+t](e,n,r,i)}))},function(){var t=1,e=0,n="nx.Anonymous";function i(t,e){this.type=t,this.meta=e,this.base=e.extends||p.RootClass,this.$base=this.base.prototype,this.__class_meta__={},this.__class__=null,this.__constructor__=null}i.prototype={constructor:i,initMetaProcessor:function(){var e=this.meta,n=e.methods||{},i=e.statics||{};p.mix(this.__class_meta__,{__type__:this.type,__meta__:e,__base__:this.base,__class_id__:t++,__method_init__:n.init||this.base.__method_init__,__static_init__:i.init||this.base.__static_init__,__static__:!e.methods&&!!e.statics})},createClassProcessor:function(){var t=this;this.__class__=function(){this.__id__=e++,t.__constructor__.apply(this,arguments),t.registerDebug(this)}},inheritProcessor:function(){var t=this.__class_meta__;this.inheritedClass(t),this.defineMethods(t,!0),this.defineMethods(t,!1),this.defineProperties(t)},inheritedClass:function(t){var e=function(){},n=this.__class__;e.prototype=this.$base,n.prototype=new e,n.prototype.$base=this.$base,n.prototype.constructor=n},defineMethods:function(t,e){var n=e?"statics":"methods",i="__"+n+"__",r=e?this.__class__:this.__class__.prototype,o=(e?this.base:this.base.prototype)[i]||{};p.forIn(this.meta[n],(function(t,e){o[t]&&"function"==typeof e&&(e.__base__=o[t])})),r[i]=p.mix(t[i],o,this.meta[n]),p.defineMembers("Method",r,r[i],e)},defineProperties:function(t){var e=t.__static__,n=e?this.__class__:this.__class__.prototype;n.__properties__=p.mix(t.__properties__,this.meta.properties),p.defineMembers("Property",n,n.__properties__,e)},methodsConstructorProcessor:function(){var t=this.__class_meta__;this.__constructor__=function(){t.__method_init__.apply(this,arguments)}},staticsConstructorProcessor:function(){this.__class_meta__.__static_init__.call(this.__class__)},registerProcessor:function(){var t=this.__class__,e=this.type,i=this.__class_meta__;p.mix(t.prototype,i),p.mix(t,i),-1===e.indexOf(n)&&p.set(p.GLOBAL,e,t)},registerDebug:function(t){p.DEBUG&&(p.set(p,"__instances__."+(e-1),t),p.set(p,"__instances__.length",e))}},p.declare=function(e,r){var o=new i("string"==typeof e?e:n+t,r||e);return o.initMetaProcessor(),o.createClassProcessor(),o.inheritProcessor(),o.methodsConstructorProcessor(),o.staticsConstructorProcessor(),o.registerProcessor(),o.__class__}}()}).call(t)})),r=e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i,r=["GM_addStyle","GM_deleteValue","GM_listValues","GM_addValueChangeListener","GM_removeValueChangeListener","GM_setValue","GM_getValue","GM_log","GM_getResourceText","GM_getResourceURL","GM_registerMenuCommand","GM_unregisterMenuCommand","GM_openInTab","GM_xmlhttpRequest","GM_download","GM_getTab","GM_saveTab","GM_getTabs","GM_notification","GM_setClipboard","GM_info"],o=n.declare("nx.GmApi",{statics:{version:"4.10.0",generate:function(t){var e={};return r.forEach((function(n){var i=n.split("_")[1];this[i]=e[i]=t[n]}),this),e}}});t.exports&&(t.exports=o)}()})),o=(e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i;n.json=JSON,n.parse=function(t){try{return JSON.parse(t)}catch(t){}return t},n.stringify=function(t){try{return JSON.stringify(t)}catch(t){}return t},t.exports&&(t.exports={json:n.json,parse:n.parse,stringify:n.stringify})}()})),e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i;n.slice2str=function(t,e,n){if(t||!(t.length<=e)){var i=n||0;return[t.substr(0,e),t.substr(e+i)]}},t.exports&&(t.exports=n.slice2str)}()})),e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i,r="@";n.json;n.slice2str;var o=n.declare("nx.AbstractStorage",{methods:{init:function(t){this.engine=t.engine,this.prefix=t.prefix||"",this.options=t,this.setAccessor()},setAccessor:function(){this.accessor={get:this.options.get||"getItem",set:this.options.set||"setItem",remove:this.options.remove||"removeItem",clear:this.options.clear||"clear"}},serialize:function(t){return n.stringify(t)},deserialize:function(t){return n.parse(t)},set:function(t,e){var i=t.indexOf(".");if(i>-1){var r=n.slice2str(t,i,1),o=this.get(r[0])||{};n.set(o,r[1],e),this.set(r[0],o)}else this.engine[this.accessor.set](this.__key(t),this.serialize(e))},sets:function(t){n.each(t,(function(t,e){this.set(t,e)}),this)},get:function(t){var e=t.indexOf(".");if(e>-1){var i=n.slice2str(t,e,1),r=this.get(i[0])||{};return n.get(r,i[1])}var o=this.engine[this.accessor.get](this.__key(t));return this.deserialize(o)},gets:function(t){var e={},i=this.__keys(t);return n.each(i,(function(t,n){e[n]=this.get(n)}),this),e},del:function(t){this.engine[this.accessor.remove](this.__key(t))},dels:function(t){var e=this.__keys(t);n.each(e,(function(t,e){this.del(e)}),this)},clear:function(){this.engine[this.accessor.clear]()},keys:function(){return Object.keys(this.engine)},__key:function(t){var e=this.prefix;return e?[e,r,t].join(""):t},__keys:function(t){var e,i,o=[];return Array.isArray(t)?t:(i=this.keys(),e=this.prefix.length+1,n.each(i,(function(t,n){this.prefix&&0===n.indexOf(this.prefix+r)&&o.push(n.slice(e))}),this),o.length?o:i)}}});t.exports&&(t.exports=o)}()}))),s=e((function(t){!function(){var e=e||this||window||Function("return this")(),n=(e.nx||i).declare("nx.GmStoreEngine",{statics:{setItem:function(t,e){return GM_setValue(t,e)},getItem:function(t){return GM_getValue(t)},removeItem:function(t){GM_deleteValue(t)},clear:function(){GM_listValues().forEach((function(t){this.removeItem(t)}),this)}}});t.exports&&(t.exports=n)}()})),c=e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i,r=n.AbstractStorage||o,c=n.GmStoreEngine||s,u=n.declare("nx.GmStorage",{extends:r,methods:{init:function(t){this.base({engine:c,prefix:t||""})},serialize:function(t){return t},keys:function(){return GM_listValues()}}});t.exports&&(t.exports=u)}()})),u=e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i,r=function(t,e){return encodeURIComponent(t)+"="+encodeURIComponent(e)};n.param=function(t,e,i){var o,s=i||r,c=[];return n.forIn(t,(function(t,e){if(null!=e){var n=Array.isArray(e)?e.join():e;c.push(s(t,n))}})),o=c.join("&"),e?o?e+"?"+o:e:o},t.exports&&(t.exports=n.param)}()})),a=e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i,r=n.param||u,o=n.declare("nx.DataTransform",{statics:{raw:function(t){return t},json:function(t){return JSON.stringify(t)},urlencoded:function(t){return r(t)},multipart:function(t){var e=new FormData;return n.forIn(t,(function(t,n){e.append(t,n)})),e}}});t.exports&&(t.exports=o)}()})),_=e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i;n.stubSingleton=function(){return{instance:null,getInstance:function(){var t=[null].concat(n.slice(arguments));if(!this.instance){var e=Function.prototype.bind.apply(this,t);this.instance=new e}return this.instance}}},t.exports&&(t.exports=n.stubSingleton)}()})),f=e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i;n.delete=function(t,e){return(e&&0!==e.length?e:Object.keys(t)).forEach((function(e){delete t[e]})),t},t.exports&&(t.exports=n.delete)}()})),h=e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i,r=n.delete||f,o={method:"get"},s=["method","url","data"];n.parseRequestArgs=function(t,e){var i=t,c=null;switch(i.length){case 1:c="string"==typeof i[0]?{url:i[0]}:i[0];break;case 2:c=n.mix({url:i[0]},i[1]);break;case 3:c=n.mix({method:i[0],url:i[1]},i[2]);break;case 4:c=n.mix({method:i[0],url:i[1],data:i[2]},i[3]);break;default:c=null,n.error("The arguments.length should between 1 ~ 4.")}return c=n.mix(null,o,c),e?[c.method,c.url,c.data,r(c,s)]:c},t.exports&&(t.exports=n.parseRequestArgs)}()})),l=e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i,r=n.stubSingleton||_,o=n.parseArgs||h,s=n.declare("nx.AbstractRequest",{statics:n.mix(null,r()),methods:{init:function(t){this.options=n.mix(null,this.defaults(),t)},defaults:function(){return null},request:function(t,e,i,r){n.error("Must be implement.")},"get,post,put,patch,delete,head":function(t){return function(){var e=[t].concat(n.slice(arguments)),i=o(e,!0);return this.request.apply(this,i)}}}});t.exports&&(t.exports=s)}()})),p=e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i,r={raw:"application/x-www-form-urlencoded",urlencoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",json:"application/json;charset=utf-8",plain:"text/plain"};n.contentType=function(t){return r[t]||r.raw},t.exports&&(t.exports=n.contentType)}()}));function d(t){return!0==(null!=(e=t)&&"object"==typeof e&&!1===Array.isArray(e))&&"[object Object]"===Object.prototype.toString.call(t);var e}var m=n(Object.freeze({__proto__:null,default:function(t){var e,n;return!1!==d(t)&&("function"==typeof(e=t.constructor)&&(!1!==d(n=e.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}})),x=e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i,r=e.isPlainObject||m,o=Object.prototype.toString;function s(t,e){n.forIn(e,(function(e,n){var i=o.call(n);switch(!0){case r(n):t[e]=t[e]||{},s(t[e],n);break;case"[object Undefined]"===i:break;default:t[e]=n}}))}n.deepAssign=function(t){var e=n.slice(arguments,1),i=t||{};return e.forEach((function(t){s(i,t)})),i},t.exports&&(t.exports=n.deepAssign)}()})),y=e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i,r={joinKey:",",encode:encodeURIComponent,isEmpty:function(t){return null!=t},transform:function(t,e){return this.encode(t)+"="+this.encode(e)}};n.param=function(t,e,i){var o,s=n.mix(null,r,i),c=[];return n.forIn(t,(function(t,e){if(s.isEmpty(e)){var n=Array.isArray(e)?e.join(s.joinKey):e;c.push(s.transform(t,n))}})),o=c.join("&"),e?o?e+"?"+o:e:o},t.exports&&(t.exports=n.param)}()})),g=e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i,r=n.DataTransform||a,o=n.AbstractRequest||l,s=n.contentType||p,c=n.deepAssign||x,u=n.param||y,_={dataType:"json",responseType:"json"},f=n.declare("nx.GmXhr",{extends:o,methods:{defaults:function(){return _},request:function(t,e,i,o){var a=n.mix(null,this.options,o),_="get"===t,f=_?null:r[a.dataType](i),h=_?u(i,e):e,l={"Content-Type":s(a.dataType)},p=c({method:t,data:f,headers:l},a);return new Promise((function(t,e){GM_xmlhttpRequest(n.mix({url:h,onload:function(e){t(e.response)},onerror:function(t){e(t)},onabort:function(t){e(t)},ontimeout:function(t){e(t)}},p))}))}}});t.exports&&(t.exports=f)}()})),v=(e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i;n.rangeDate=function(t,e,n){for(var i=new Date(t),r=new Date(e),o=[],s=i;s<=r;s.setDate(s.getDate()+1)){var c=n?s.toJSON():new Date(s);o.push(c)}return o},t.exports&&(t.exports=n.rangeDate)}()})),e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i;n.sum=function(t,e){var i=function(t){switch(typeof t){case"string":return function(e,i){return n.get(i,t)};case"function":return t;default:return function(t,e){return e}}}(e);return t.reduce((function(t,e,n,r){return t+i(n,e,r)}),0)},t.exports&&(t.exports=n.sum)}()})),e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i,r=function(t){return(""+t).padStart(2,"0")};n.timeFormat=function(t){var e=parseInt(t%1e3/100),n=Math.floor(t/1e3%60),i=Math.floor(t/6e4%60),o=Math.floor(t/36e5%24);return{hour:o,minute:i,second:n,millisecond:e,datetime:[r(o),r(i),r(n)].join(":")}},t.exports&&(t.exports=n.timeFormat)}()})),e((function(t){!function(){var e=e||this||window||Function("return this")(),n=e.nx||i;n.waitToDisplay=function(t,e,i){var r=document.querySelector(t);if(null!=r)return i(r);setTimeout((function(){n.waitToDisplay(t,e,i)}),e)},t.exports&&(t.exports=n.waitToDisplay)}()})),g.getInstance()),b=r.generate(i.GLOBAL),w=new c("aric");i.declare({statics:{init:function(){this.nx(),i.mix(unsafeWindow,{$:i.mix(unsafeWindow.$,{version:$.fn.jquery}),gmsdk:this.sdk()})},nx:function(){!unsafeWindow.nx&&(unsafeWindow.nx=i)},sdk:function(){return i.mix({version:"1.1.6",http:v,store:w},b)}}})}));
