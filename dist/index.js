/**
 *  name: @feizheng/gm-sdk
 *  description: Sdk for tampermonkey based on jQuery/nx.
 *  homepage: https://github.com/afeiship/gm-sdk
 *  version: 1.1.1
 *  date: 2020-07-12T00:17:44.760Z
 *  license: MIT
 */

!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var n=e((function(e,n){(function(){var i,r,s,o,c,a,u="object"==typeof t&&t&&t.Object===Object&&t,_="object"==typeof self&&self&&self.Object===Object&&self,f=u||_||Function("return this")(),h=n&&!n.nodeType&&n,l=h&&e&&!e.nodeType&&e,p=f.nx=f.nx||{BREAKER:{},VERSION:"2.6.0",DEBUG:!1,GLOBAL:f};l?((l.exports=p).nx=p,h.nx=p):f.nx=p,i=Array.prototype,r=Object.prototype.hasOwnProperty,s=/\[(\w+)\]/g,p.noop=function(){},p.stubTrue=function(){return!0},p.stubFalse=function(){return!1},p.stubValue=function(t){return t},p.error=function(t){throw new Error(t)},p.try=function(t){try{t()}catch(t){}},p.forEach=function(t,e,n){var i,r=t.length;for(i=0;i<r&&e.call(n,t[i],i,t)!==p.BREAKER;i++);},p.forIn=function(t,e,n){var i;for(i in t)if(r.call(t,i)&&e.call(n,i,t[i],t)===p.BREAKER)break},p.each=function(t,e,n){var i,s,o=function(i,r,s){return e.call(n,i,r,t,s)===p.BREAKER};if(t)if("number"==typeof(s=t.length))for(i=0;i<s&&!o(i,t[i],!0);i++);else for(i in t)if(r.call(t,i)&&o(i,t[i],!1))break},p.map=function(t,e,n){var i=[];return p.each(t,(function(){var t=e.apply(n,arguments);if(t===p.BREAKER)return p.BREAKER;i.push(t)})),i},p.mix=function(t){var e,n,i=t||{},r=arguments;for(e=1,n=r.length;e<n;e++)p.forIn(r[e],(function(t,e){i[t]=e}));return i},p.slice=function(t,e,n){return i.slice.call(t,e,n)},p.set=function(t,e,n){for(var i=e.replace(s,"$1").split("."),r=t||p.GLOBAL,o=i.length-1,c=i[o],a=0;a<o;a++){var u=i[a],_=isNaN(+i[a+1])?{}:[];r=r[u]=r[u]||_}return r[c]=n,t},p.get=function(t,e,n){if(!e)return t;var i=e.replace(s,".$1").split("."),r=t||p.GLOBAL;return i.forEach((function(t){r=r&&r[t]})),void 0!==n&&null==r?n:r},p.path=function(t,e,n){return null==n?this.get(t,e):this.set(t,e,n)},o=function(){},c={__class_id__:0,__type__:"nx.RootClass",__base__:Object,__meta__:{},__static__:!1,__statics__:{},__properties__:{},__methods__:{},__method_init__:p.noop,__static_init__:p.noop},a={base:function(){var t,e=this.base.caller;if(e&&(t=e.__base__))return t.apply(this,arguments)},parent:function(t){var e=void 0===this.__id__,n=p.slice(arguments,1),i=e?this.__base__:this.__base__.prototype,r=this["@"+t].__type__,s=["get","set"][n.length];switch(r){case"method":return i[t].apply(this,n);case"property":return i["@"+t][s].apply(this,n)}}},c.__methods__=o.prototype=p.mix({constructor:o,init:p.noop,destroy:p.noop,toString:function(){return"[Class@"+this.__type__+"]"}},a),p.mix(c.__statics__,a),p.mix(o,c),p.mix(o,c.__statics__),p.RootClass=o,p.defineProperty=function(t,e,n,i){var r,s,o,c,a,u="@"+e,_=n&&"object"==typeof n?n:{value:n};return"value"in _?(c=_.value,a="_"+e,r=function(){return a in this?this[a]:"function"==typeof c?c.call(this):c},s=function(t){this[a]=t}):(r=n.get||t[u]&&t[u].get||p.noop,s=n.set||t[u]&&t[u].set||p.noop),u in t&&(r.__base__=t[u].get,s.__base__=t[u].set),o=t[u]={__meta__:n,__name__:e,__type__:"property",__static__:!!i,get:r,set:s,configurable:!0},Object.defineProperty(t,e,o),o},p.defineMethod=function(t,e,n,i){var r="@"+e;return t[e]=n,t[r]={__meta__:n,__name__:e,__type__:"method",__static__:!!i}},p.defineBombMethod=function(t,e,n,i){e.split(",").forEach((function(e,r){p.defineMethod(t,e,n.call(t,e,r),i)}))},p.defineMembers=function(t,e,n,i){p.forIn(n,(function(n,r){n.indexOf(",")>-1?p.defineBombMethod(e,n,r,i):p["define"+t](e,n,r,i)}))},function(){var t=1,e=0;function n(t,e){this.type=t,this.meta=e,this.base=e.extends||p.RootClass,this.$base=this.base.prototype,this.__class_meta__={},this.__class__=null,this.__constructor__=null}n.prototype={constructor:n,initMetaProcessor:function(){var e=this.meta,n=e.methods||{},i=e.statics||{};p.mix(this.__class_meta__,{__type__:this.type,__meta__:e,__base__:this.base,__class_id__:t++,__method_init__:n.init||this.base.__method_init__,__static_init__:i.init||this.base.__static_init__,__static__:!e.methods&&!!e.statics})},createClassProcessor:function(){var t=this;this.__class__=function(){this.__id__=e++,t.__constructor__.apply(this,arguments),t.registerDebug(this)}},inheritProcessor:function(){var t=this.__class_meta__;this.inheritedClass(t),this.defineMethods(t,!0),this.defineMethods(t,!1),this.defineProperties(t)},inheritedClass:function(t){var e=function(){},n=this.__class__;e.prototype=this.$base,n.prototype=new e,n.prototype.$base=this.$base,n.prototype.constructor=n},defineMethods:function(t,e){var n=e?"statics":"methods",i="__"+n+"__",r=e?this.__class__:this.__class__.prototype,s=(e?this.base:this.base.prototype)[i]||{};p.forIn(this.meta[n],(function(t,e){s[t]&&"function"==typeof e&&(e.__base__=s[t])})),r[i]=p.mix(t[i],s,this.meta[n]),p.defineMembers("Method",r,r[i],e)},defineProperties:function(t){var e=t.__static__,n=e?this.__class__:this.__class__.prototype;n.__properties__=p.mix(t.__properties__,this.meta.properties),p.defineMembers("Property",n,n.__properties__,e)},methodsConstructorProcessor:function(){var t=this.__class_meta__;this.__constructor__=function(){t.__method_init__.apply(this,arguments)}},staticsConstructorProcessor:function(){this.__class_meta__.__static_init__.call(this.__class__)},registerProcessor:function(){var t=this.__class__,e=this.type,n=this.__class_meta__;p.mix(t.prototype,n),p.mix(t,n),-1===e.indexOf("nx.Anonymous")&&p.set(p.GLOBAL,e,t)},registerDebug:function(t){p.DEBUG&&(p.set(p,"__instances__."+(e-1),t),p.set(p,"__instances__.length",e))}},p.declare=function(e,i){var r=new n("string"==typeof e?e:"nx.Anonymous"+t,i||e);return r.initMetaProcessor(),r.createClassProcessor(),r.inheritProcessor(),r.methodsConstructorProcessor(),r.staticsConstructorProcessor(),r.registerProcessor(),r.__class__}}()}).call(t)})),i=e((function(t){!function(){var e=e||this||window||Function("return this")(),i=e.nx||n,r=function(t,e){return encodeURIComponent(t)+"="+encodeURIComponent(e)};i.param=function(t,e,n){var s,o=n||r,c=[];return i.forIn(t,(function(t,e){if(null!=e){var n=Array.isArray(e)?e.join():e;c.push(o(t,n))}})),s=c.join("&"),e?s?e+"?"+s:e:s},t.exports&&(t.exports=i.param)}()})),r=e((function(t){!function(){var e=e||this||window||Function("return this")(),r=e.nx||n,s=r.param||i,o=r.declare("nx.DataTransform",{statics:{raw:function(t){return t},json:function(t){return JSON.stringify(t)},urlencoded:function(t){return s(t)},multipart:function(t){var e=new FormData;return r.forIn(t,(function(t,n){e.append(t,n)})),e}}});t.exports&&(t.exports=o)}()})),s=e((function(t){!function(){var e=e||this||window||Function("return this")(),i=e.nx||n;i.stubSingleton=function(){return{instance:null,getInstance:function(){var t=[null].concat(i.slice(arguments));if(!this.instance){var e=Function.prototype.bind.apply(this,t);this.instance=new e}return this.instance}}},t.exports&&(t.exports=i.stubSingleton)}()})),o=e((function(t){!function(){var e=e||this||window||Function("return this")(),i=e.nx||n;i.delete=function(t,e){return(e&&0!==e.length?e:Object.keys(t)).forEach((function(e){delete t[e]})),t},t.exports&&(t.exports=i.delete)}()})),c=e((function(t){!function(){var e=e||this||window||Function("return this")(),i=e.nx||n,r=i.delete||o,s={method:"get"},c=["method","url","data"];i.parseRequestArgs=function(t,e){var n=t,o=null;switch(n.length){case 1:o="string"==typeof n[0]?{url:n[0]}:n[0];break;case 2:o=i.mix({url:n[0]},n[1]);break;case 3:o=i.mix({method:n[0],url:n[1]},n[2]);break;case 4:o=i.mix({method:n[0],url:n[1],data:n[2]},n[3]);break;default:o=null,i.error("The arguments.length should between 1 ~ 4.")}return o=i.mix(null,s,o),e?[o.method,o.url,o.data,r(o,c)]:o},t.exports&&(t.exports=i.parseRequestArgs)}()})),a=e((function(t){!function(){var e=e||this||window||Function("return this")(),i=e.nx||n,r=i.stubSingleton||s,o=i.parseArgs||c,a=i.declare("nx.AbstractRequest",{statics:i.mix(null,r()),methods:{init:function(t){this.options=i.mix(null,this.defaults(),t)},defaults:function(){return null},request:function(t,e,n,r){i.error("Must be implement.")},"get,post,put,patch,delete,head":function(t){return function(){var e=o(arguments,!0);return e[0]=t,this.request.apply(this,e)}}}});t.exports&&(t.exports=a)}()})),u=e((function(t){!function(){var e=e||this||window||Function("return this")(),i=e.nx||n,r={raw:"application/x-www-form-urlencoded",urlencoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",json:"application/json;charset=utf-8",plain:"text/plain"};i.contentType=function(t){return r[t]||r.raw},t.exports&&(t.exports=i.contentType)}()}));function _(t){return!0==(null!=(e=t)&&"object"==typeof e&&!1===Array.isArray(e))&&"[object Object]"===Object.prototype.toString.call(t);var e}function f(t){var e,n;return!1!==_(t)&&("function"==typeof(e=t.constructor)&&(!1!==_(n=e.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}var h=e((function(t){!function(){var e=e||this||window||Function("return this")(),i=e.nx||n,r=e.isPlainObject||f,s=Object.prototype.toString;function o(t,e){i.forIn(e,(function(e,n){var i=s.call(n);switch(!0){case r(n):t[e]=t[e]||{},o(t[e],n);break;case"[object Undefined]"===i:break;default:t[e]=n}}))}i.deepAssign=function(t){var e=i.slice(arguments,1),n=t||{};return e.forEach((function(t){o(n,t)})),n},t.exports&&(t.exports=i.deepAssign)}()})),l=e((function(t){!function(){var e=e||this||window||Function("return this")(),i=e.nx||n,r={joinKey:",",encode:encodeURIComponent,isEmpty:function(t){return null!=t},transform:function(t,e){return this.encode(t)+"="+this.encode(e)}};i.param=function(t,e,n){var s,o=i.mix(null,r,n),c=[];return i.forIn(t,(function(t,e){if(o.isEmpty(e)){var n=Array.isArray(e)?e.join(o.joinKey):e;c.push(o.transform(t,n))}})),s=c.join("&"),e?s?e+"?"+s:e:s},t.exports&&(t.exports=i.param)}()})),p=e((function(t){!function(){var e=e||this||window||Function("return this")(),i=e.nx||n,s=i.DataTransform||r,o=i.AbstractRequest||a,c=i.contentType||u,_=i.deepAssign||h,f=i.param||l,p={dataType:"json",responseType:"json"},d=i.declare("nx.GmXhr",{extends:o,methods:{defaults:function(){return p},request:function(t,e,n,r){var o=i.mix(null,this.options,r),a="get"===t,u=a?null:s[o.dataType](n),h=a?f(n,e):e,l={"Content-Type":c(o.dataType)},p=_({method:t,data:u,headers:l},o);return new Promise((function(t,e){GM_xmlhttpRequest(i.mix({url:h,onload:function(e){t(e.response)},onerror:function(t){e(t)},onabort:function(t){e(t)},ontimeout:function(t){e(t)}},p))}))}}});t.exports&&(t.exports=d)}()})),d=(e((function(t){!function(){var e=e||this||window||Function("return this")(),i=e.nx||n;i.json=JSON,i.parse=function(t){try{return JSON.parse(t)}catch(t){}return t},i.stringify=function(t){try{return JSON.stringify(t)}catch(t){}return t},t.exports&&(t.exports={json:i.json,parse:i.parse,stringify:i.stringify})}()})),e((function(t){!function(){var e=e||this||window||Function("return this")(),i=e.nx||n;i.slice2str=function(t,e,n){if(t||!(t.length<=e)){var i=n||0;return[t.substr(0,e),t.substr(e+i)]}},t.exports&&(t.exports=i.slice2str)}()})),e((function(t){!function(){var e=e||this||window||Function("return this")(),i=e.nx||n,r="@";i.json;i.slice2str;var s=i.declare("nx.AbstractStorage",{methods:{init:function(t){this.engine=t.engine,this.prefix=t.prefix||"",this.options=t,this.setAccessor()},setAccessor:function(){this.accessor={get:this.options.get||"getItem",set:this.options.set||"setItem",remove:this.options.remove||"removeItem",clear:this.options.clear||"clear"}},serialize:function(t){return i.stringify(t)},deserialize:function(t){return i.parse(t)},set:function(t,e){var n=t.indexOf(".");if(n>-1){var r=i.slice2str(t,n,1),s=this.get(r[0])||{};i.set(s,r[1],e),this.set(r[0],s)}else this.engine[this.accessor.set](this.__key(t),this.serialize(e))},sets:function(t){i.each(t,(function(t,e){this.set(t,e)}),this)},get:function(t){var e=t.indexOf(".");if(e>-1){var n=i.slice2str(t,e,1),r=this.get(n[0])||{};return i.get(r,n[1])}var s=this.engine[this.accessor.get](this.__key(t));return this.deserialize(s)},gets:function(t){var e={},n=this.__keys(t);return i.each(n,(function(t,n){e[n]=this.get(n)}),this),e},del:function(t){this.engine[this.accessor.remove](this.__key(t))},dels:function(t){var e=this.__keys(t);i.each(e,(function(t,e){this.del(e)}),this)},clear:function(){this.engine[this.accessor.clear]()},keys:function(){return Object.keys(this.engine)},__key:function(t){var e=this.prefix;return e?[e,r,t].join(""):t},__keys:function(t){var e,n,s=[];return Array.isArray(t)?t:(n=this.keys(),e=this.prefix.length+1,i.each(n,(function(t,n){this.prefix&&0===n.indexOf(this.prefix+r)&&s.push(n.slice(e))}),this),s.length?s:n)}}});t.exports&&(t.exports=s)}()}))),m=e((function(t){!function(){var e=e||this||window||Function("return this")(),i=(e.nx||n).declare("nx.GmStoreEngine",{statics:{setItem:function(t,e){return GM_setValue(t,e)},getItem:function(t){return GM_getValue(t)},removeItem:function(t){GM_deleteValue(t)},clear:function(){GM_listValues().forEach((function(t){this.removeItem(t)}),this)}}});t.exports&&(t.exports=i)}()})),x=e((function(t){!function(){var e=e||this||window||Function("return this")(),i=e.nx||n,r=i.AbstractStorage||d,s=i.GmStoreEngine||m,o=i.declare("nx.GmStorage",{extends:r,methods:{init:function(t){this.base({engine:s,prefix:t||""})},serialize:function(t){return t},keys:function(){return GM_listValues()}}});t.exports&&(t.exports=o)}()})),y=e((function(t){!function(){var e=e||this||window||Function("return this")(),i=e.nx||n,r=["GM_addStyle","GM_deleteValue","GM_listValues","GM_addValueChangeListener","GM_removeValueChangeListener","GM_setValue","GM_getValue","GM_log","GM_getResourceText","GM_getResourceURL","GM_registerMenuCommand","GM_unregisterMenuCommand","GM_openInTab","GM_xmlhttpRequest","GM_download","GM_getTab","GM_saveTab","GM_getTabs","GM_notification","GM_setClipboard","GM_info"],s=i.declare("nx.GmApi",{statics:{version:"4.10.0",generate:function(t){var e={};return r.forEach((function(n){var i=n.split("_")[1];this[i]=e[i]=t[n]}),this),e}}});t.exports&&(t.exports=s)}()})),g=p.getInstance(),v=y.generate(n.GLOBAL),b=new x("aric");n.declare({statics:{init:function(){n.mix(unsafeWindow,{nx:unsafeWindow.nx||n,$:n.mix($,{version:$.fn.jquery}),gmsdk:this.sdk()})},sdk:function(){return n.mix({version:"1.1.1",http:g,store:b},v)}}})}));
