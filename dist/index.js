/**
 *  name: @feizheng/gm-sdk
 *  description: Sdk for tampermonkey based on jQuery/nx.
 *  homepage: https://github.com/afeiship/gm-sdk
 *  version: 1.1.4
 *  date: 2020-10-13T06:51:26.780Z
 *  license: MIT
 */

!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t,n,e){return t(e={path:n,exports:{},require:function(t,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==n&&e.path)}},e.exports),e.exports}var e=n((function(n,e){(function(){var i,r,s,o,c,a,u="object"==typeof t&&t&&t.Object===Object&&t,_="object"==typeof self&&self&&self.Object===Object&&self,f=u||_||Function("return this")(),h=e&&!e.nodeType&&e,p=h&&n&&!n.nodeType&&n,l=f.nx=f.nx||{BREAKER:{},VERSION:"2.6.0",DEBUG:!1,GLOBAL:f};p?((p.exports=l).nx=l,h.nx=l):f.nx=l,i=Array.prototype,r=Object.prototype.hasOwnProperty,s=/\[(\w+)\]/g,l.noop=function(){},l.stubTrue=function(){return!0},l.stubFalse=function(){return!1},l.stubValue=function(t){return t},l.error=function(t){throw new Error(t)},l.try=function(t){try{t()}catch(t){}},l.forEach=function(t,n,e){var i,r=t.length;for(i=0;i<r&&n.call(e,t[i],i,t)!==l.BREAKER;i++);},l.forIn=function(t,n,e){var i;for(i in t)if(r.call(t,i)&&n.call(e,i,t[i],t)===l.BREAKER)break},l.each=function(t,n,e){var i,s,o=function(i,r,s){return n.call(e,i,r,t,s)===l.BREAKER};if(t)if("number"==typeof(s=t.length))for(i=0;i<s&&!o(i,t[i],!0);i++);else for(i in t)if(r.call(t,i)&&o(i,t[i],!1))break},l.map=function(t,n,e){var i=[];return l.each(t,(function(){var t=n.apply(e,arguments);if(t===l.BREAKER)return l.BREAKER;i.push(t)})),i},l.mix=function(t){var n,e,i=t||{},r=arguments;for(n=1,e=r.length;n<e;n++)l.forIn(r[n],(function(t,n){i[t]=n}));return i},l.slice=function(t,n,e){return i.slice.call(t,n,e)},l.set=function(t,n,e){for(var i=n.replace(s,"$1").split("."),r=t||l.GLOBAL,o=i.length-1,c=i[o],a=0;a<o;a++){var u=i[a],_=isNaN(+i[a+1])?{}:[];r=r[u]=r[u]||_}return r[c]=e,t},l.get=function(t,n,e){if(!n)return t;var i=n.replace(s,".$1").split("."),r=t||l.GLOBAL;return i.forEach((function(t){r=r&&r[t]})),void 0!==e&&null==r?e:r},l.path=function(t,n,e){return null==e?this.get(t,n):this.set(t,n,e)},o=function(){},c={__class_id__:0,__type__:"nx.RootClass",__base__:Object,__meta__:{},__static__:!1,__statics__:{},__properties__:{},__methods__:{},__method_init__:l.noop,__static_init__:l.noop},a={base:function(){var t,n=this.base.caller;if(n&&(t=n.__base__))return t.apply(this,arguments)},parent:function(t){var n=void 0===this.__id__,e=l.slice(arguments,1),i=n?this.__base__:this.__base__.prototype,r=this["@"+t].__type__,s=["get","set"][e.length];switch(r){case"method":return i[t].apply(this,e);case"property":return i["@"+t][s].apply(this,e)}}},c.__methods__=o.prototype=l.mix({constructor:o,init:l.noop,destroy:l.noop,toString:function(){return"[Class@"+this.__type__+"]"}},a),l.mix(c.__statics__,a),l.mix(o,c),l.mix(o,c.__statics__),l.RootClass=o,l.defineProperty=function(t,n,e,i){var r,s,o,c,a,u="@"+n,_=e&&"object"==typeof e?e:{value:e};return"value"in _?(c=_.value,a="_"+n,r=function(){return a in this?this[a]:"function"==typeof c?c.call(this):c},s=function(t){this[a]=t}):(r=e.get||t[u]&&t[u].get||l.noop,s=e.set||t[u]&&t[u].set||l.noop),u in t&&(r.__base__=t[u].get,s.__base__=t[u].set),o=t[u]={__meta__:e,__name__:n,__type__:"property",__static__:!!i,get:r,set:s,configurable:!0},Object.defineProperty(t,n,o),o},l.defineMethod=function(t,n,e,i){var r="@"+n;return t[n]=e,t[r]={__meta__:e,__name__:n,__type__:"method",__static__:!!i}},l.defineBombMethod=function(t,n,e,i){n.split(",").forEach((function(n,r){l.defineMethod(t,n,e.call(t,n,r),i)}))},l.defineMembers=function(t,n,e,i){l.forIn(e,(function(e,r){e.indexOf(",")>-1?l.defineBombMethod(n,e,r,i):l["define"+t](n,e,r,i)}))},function(){var t=1,n=0;function e(t,n){this.type=t,this.meta=n,this.base=n.extends||l.RootClass,this.$base=this.base.prototype,this.__class_meta__={},this.__class__=null,this.__constructor__=null}e.prototype={constructor:e,initMetaProcessor:function(){var n=this.meta,e=n.methods||{},i=n.statics||{};l.mix(this.__class_meta__,{__type__:this.type,__meta__:n,__base__:this.base,__class_id__:t++,__method_init__:e.init||this.base.__method_init__,__static_init__:i.init||this.base.__static_init__,__static__:!n.methods&&!!n.statics})},createClassProcessor:function(){var t=this;this.__class__=function(){this.__id__=n++,t.__constructor__.apply(this,arguments),t.registerDebug(this)}},inheritProcessor:function(){var t=this.__class_meta__;this.inheritedClass(t),this.defineMethods(t,!0),this.defineMethods(t,!1),this.defineProperties(t)},inheritedClass:function(t){var n=function(){},e=this.__class__;n.prototype=this.$base,e.prototype=new n,e.prototype.$base=this.$base,e.prototype.constructor=e},defineMethods:function(t,n){var e=n?"statics":"methods",i="__"+e+"__",r=n?this.__class__:this.__class__.prototype,s=(n?this.base:this.base.prototype)[i]||{};l.forIn(this.meta[e],(function(t,n){s[t]&&"function"==typeof n&&(n.__base__=s[t])})),r[i]=l.mix(t[i],s,this.meta[e]),l.defineMembers("Method",r,r[i],n)},defineProperties:function(t){var n=t.__static__,e=n?this.__class__:this.__class__.prototype;e.__properties__=l.mix(t.__properties__,this.meta.properties),l.defineMembers("Property",e,e.__properties__,n)},methodsConstructorProcessor:function(){var t=this.__class_meta__;this.__constructor__=function(){t.__method_init__.apply(this,arguments)}},staticsConstructorProcessor:function(){this.__class_meta__.__static_init__.call(this.__class__)},registerProcessor:function(){var t=this.__class__,n=this.type,e=this.__class_meta__;l.mix(t.prototype,e),l.mix(t,e),-1===n.indexOf("nx.Anonymous")&&l.set(l.GLOBAL,n,t)},registerDebug:function(t){l.DEBUG&&(l.set(l,"__instances__."+(n-1),t),l.set(l,"__instances__.length",n))}},l.declare=function(n,i){var r=new e("string"==typeof n?n:"nx.Anonymous"+t,i||n);return r.initMetaProcessor(),r.createClassProcessor(),r.inheritProcessor(),r.methodsConstructorProcessor(),r.staticsConstructorProcessor(),r.registerProcessor(),r.__class__}}()}).call(t)})),i=n((function(t){!function(){var n=n||this||window||Function("return this")(),i=n.nx||e,r=["GM_addStyle","GM_deleteValue","GM_listValues","GM_addValueChangeListener","GM_removeValueChangeListener","GM_setValue","GM_getValue","GM_log","GM_getResourceText","GM_getResourceURL","GM_registerMenuCommand","GM_unregisterMenuCommand","GM_openInTab","GM_xmlhttpRequest","GM_download","GM_getTab","GM_saveTab","GM_getTabs","GM_notification","GM_setClipboard","GM_info"],s=i.declare("nx.GmApi",{statics:{version:"4.10.0",generate:function(t){var n={};return r.forEach((function(e){var i=e.split("_")[1];this[i]=n[i]=t[e]}),this),n}}});t.exports&&(t.exports=s)}()})),r=(n((function(t){!function(){var n=n||this||window||Function("return this")(),i=n.nx||e;i.json=JSON,i.parse=function(t){try{return JSON.parse(t)}catch(t){}return t},i.stringify=function(t){try{return JSON.stringify(t)}catch(t){}return t},t.exports&&(t.exports={json:i.json,parse:i.parse,stringify:i.stringify})}()})),n((function(t){!function(){var n=n||this||window||Function("return this")(),i=n.nx||e;i.slice2str=function(t,n,e){if(t||!(t.length<=n)){var i=e||0;return[t.substr(0,n),t.substr(n+i)]}},t.exports&&(t.exports=i.slice2str)}()})),n((function(t){!function(){var n=n||this||window||Function("return this")(),i=n.nx||e,r="@";i.json;i.slice2str;var s=i.declare("nx.AbstractStorage",{methods:{init:function(t){this.engine=t.engine,this.prefix=t.prefix||"",this.options=t,this.setAccessor()},setAccessor:function(){this.accessor={get:this.options.get||"getItem",set:this.options.set||"setItem",remove:this.options.remove||"removeItem",clear:this.options.clear||"clear"}},serialize:function(t){return i.stringify(t)},deserialize:function(t){return i.parse(t)},set:function(t,n){var e=t.indexOf(".");if(e>-1){var r=i.slice2str(t,e,1),s=this.get(r[0])||{};i.set(s,r[1],n),this.set(r[0],s)}else this.engine[this.accessor.set](this.__key(t),this.serialize(n))},sets:function(t){i.each(t,(function(t,n){this.set(t,n)}),this)},get:function(t){var n=t.indexOf(".");if(n>-1){var e=i.slice2str(t,n,1),r=this.get(e[0])||{};return i.get(r,e[1])}var s=this.engine[this.accessor.get](this.__key(t));return this.deserialize(s)},gets:function(t){var n={},e=this.__keys(t);return i.each(e,(function(t,e){n[e]=this.get(e)}),this),n},del:function(t){this.engine[this.accessor.remove](this.__key(t))},dels:function(t){var n=this.__keys(t);i.each(n,(function(t,n){this.del(n)}),this)},clear:function(){this.engine[this.accessor.clear]()},keys:function(){return Object.keys(this.engine)},__key:function(t){var n=this.prefix;return n?[n,r,t].join(""):t},__keys:function(t){var n,e,s=[];return Array.isArray(t)?t:(e=this.keys(),n=this.prefix.length+1,i.each(e,(function(t,e){this.prefix&&0===e.indexOf(this.prefix+r)&&s.push(e.slice(n))}),this),s.length?s:e)}}});t.exports&&(t.exports=s)}()}))),s=n((function(t){!function(){var n=n||this||window||Function("return this")(),i=(n.nx||e).declare("nx.GmStoreEngine",{statics:{setItem:function(t,n){return GM_setValue(t,n)},getItem:function(t){return GM_getValue(t)},removeItem:function(t){GM_deleteValue(t)},clear:function(){GM_listValues().forEach((function(t){this.removeItem(t)}),this)}}});t.exports&&(t.exports=i)}()})),o=n((function(t){!function(){var n=n||this||window||Function("return this")(),i=n.nx||e,o=i.AbstractStorage||r,c=i.GmStoreEngine||s,a=i.declare("nx.GmStorage",{extends:o,methods:{init:function(t){this.base({engine:c,prefix:t||""})},serialize:function(t){return t},keys:function(){return GM_listValues()}}});t.exports&&(t.exports=a)}()})),c=n((function(t){!function(){var n=n||this||window||Function("return this")(),i=n.nx||e,r=function(t,n){return encodeURIComponent(t)+"="+encodeURIComponent(n)};i.param=function(t,n,e){var s,o=e||r,c=[];return i.forIn(t,(function(t,n){if(null!=n){var e=Array.isArray(n)?n.join():n;c.push(o(t,e))}})),s=c.join("&"),n?s?n+"?"+s:n:s},t.exports&&(t.exports=i.param)}()})),a=n((function(t){!function(){var n=n||this||window||Function("return this")(),i=n.nx||e,r=i.param||c,s=i.declare("nx.DataTransform",{statics:{raw:function(t){return t},json:function(t){return JSON.stringify(t)},urlencoded:function(t){return r(t)},multipart:function(t){var n=new FormData;return i.forIn(t,(function(t,e){n.append(t,e)})),n}}});t.exports&&(t.exports=s)}()})),u=n((function(t){!function(){var n=n||this||window||Function("return this")(),i=n.nx||e;i.stubSingleton=function(){return{instance:null,getInstance:function(){var t=[null].concat(i.slice(arguments));if(!this.instance){var n=Function.prototype.bind.apply(this,t);this.instance=new n}return this.instance}}},t.exports&&(t.exports=i.stubSingleton)}()})),_=n((function(t){!function(){var n=n||this||window||Function("return this")(),i=n.nx||e;i.delete=function(t,n){return(n&&0!==n.length?n:Object.keys(t)).forEach((function(n){delete t[n]})),t},t.exports&&(t.exports=i.delete)}()})),f=n((function(t){!function(){var n=n||this||window||Function("return this")(),i=n.nx||e,r=i.delete||_,s={method:"get"},o=["method","url","data"];i.parseRequestArgs=function(t,n){var e=t,c=null;switch(e.length){case 1:c="string"==typeof e[0]?{url:e[0]}:e[0];break;case 2:c=i.mix({url:e[0]},e[1]);break;case 3:c=i.mix({method:e[0],url:e[1]},e[2]);break;case 4:c=i.mix({method:e[0],url:e[1],data:e[2]},e[3]);break;default:c=null,i.error("The arguments.length should between 1 ~ 4.")}return c=i.mix(null,s,c),n?[c.method,c.url,c.data,r(c,o)]:c},t.exports&&(t.exports=i.parseRequestArgs)}()})),h=n((function(t){!function(){var n=n||this||window||Function("return this")(),i=n.nx||e,r=i.stubSingleton||u,s=i.parseArgs||f,o=i.declare("nx.AbstractRequest",{statics:i.mix(null,r()),methods:{init:function(t){this.options=i.mix(null,this.defaults(),t)},defaults:function(){return null},request:function(t,n,e,r){i.error("Must be implement.")},"get,post,put,patch,delete,head":function(t){return function(){var n=s(arguments,!0);return n[0]=t,this.request.apply(this,n)}}}});t.exports&&(t.exports=o)}()})),p=n((function(t){!function(){var n=n||this||window||Function("return this")(),i=n.nx||e,r={raw:"application/x-www-form-urlencoded",urlencoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",json:"application/json;charset=utf-8",plain:"text/plain"};i.contentType=function(t){return r[t]||r.raw},t.exports&&(t.exports=i.contentType)}()}));function l(t){return!0==(null!=(n=t)&&"object"==typeof n&&!1===Array.isArray(n))&&"[object Object]"===Object.prototype.toString.call(t);var n}function d(t){var n,e;return!1!==l(t)&&("function"==typeof(n=t.constructor)&&(!1!==l(e=n.prototype)&&!1!==e.hasOwnProperty("isPrototypeOf")))}var m=n((function(t){!function(){var n=n||this||window||Function("return this")(),i=n.nx||e,r=n.isPlainObject||d,s=Object.prototype.toString;function o(t,n){i.forIn(n,(function(n,e){var i=s.call(e);switch(!0){case r(e):t[n]=t[n]||{},o(t[n],e);break;case"[object Undefined]"===i:break;default:t[n]=e}}))}i.deepAssign=function(t){var n=i.slice(arguments,1),e=t||{};return n.forEach((function(t){o(e,t)})),e},t.exports&&(t.exports=i.deepAssign)}()})),x=n((function(t){!function(){var n=n||this||window||Function("return this")(),i=n.nx||e,r={joinKey:",",encode:encodeURIComponent,isEmpty:function(t){return null!=t},transform:function(t,n){return this.encode(t)+"="+this.encode(n)}};i.param=function(t,n,e){var s,o=i.mix(null,r,e),c=[];return i.forIn(t,(function(t,n){if(o.isEmpty(n)){var e=Array.isArray(n)?n.join(o.joinKey):n;c.push(o.transform(t,e))}})),s=c.join("&"),n?s?n+"?"+s:n:s},t.exports&&(t.exports=i.param)}()})),y=n((function(t){!function(){var n=n||this||window||Function("return this")(),i=n.nx||e,r=i.DataTransform||a,s=i.AbstractRequest||h,o=i.contentType||p,c=i.deepAssign||m,u=i.param||x,_={dataType:"json",responseType:"json"},f=i.declare("nx.GmXhr",{extends:s,methods:{defaults:function(){return _},request:function(t,n,e,s){var a=i.mix(null,this.options,s),_="get"===t,f=_?null:r[a.dataType](e),h=_?u(e,n):n,p={"Content-Type":o(a.dataType)},l=c({method:t,data:f,headers:p},a);return new Promise((function(t,n){GM_xmlhttpRequest(i.mix({url:h,onload:function(n){t(n.response)},onerror:function(t){n(t)},onabort:function(t){n(t)},ontimeout:function(t){n(t)}},l))}))}}});t.exports&&(t.exports=f)}()})),g=(n((function(t){!function(){var n=n||this||window||Function("return this")(),i=n.nx||e;i.rangeDate=function(t,n,e){for(var i=new Date(t),r=new Date(n),s=[],o=i;o<=r;o.setDate(o.getDate()+1)){var c=e?o.toJSON():new Date(o);s.push(c)}return s},t.exports&&(t.exports=i.rangeDate)}()})),n((function(t){!function(){var n=n||this||window||Function("return this")(),i=n.nx||e;i.sum=function(t,n){var e=function(t){switch(typeof t){case"string":return function(n,e){return i.get(e,t)};case"function":return t;default:return function(t,n){return n}}}(n);return t.reduce((function(t,n,i,r){return t+e(i,n,r)}),0)},t.exports&&(t.exports=i.sum)}()})),y.getInstance()),v=i.generate(e.GLOBAL),b=new o("aric");e.declare({statics:{init:function(){e.mix(unsafeWindow,{nx:unsafeWindow.nx||e,$:e.mix(unsafeWindow.$,{version:$.fn.jquery}),gmsdk:this.sdk()})},sdk:function(){return e.mix({version:"1.1.4",http:g,store:b},v)}}})}));
