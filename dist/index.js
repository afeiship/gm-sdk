/**
 *  name: @feizheng/gm-sdk
 *  description: Sdk for tampermonkey based on jQuery/nx.
 *  homepage: https://github.com/afeiship/gm-sdk
 *  version: 1.1.8
 *  date: 2020-11-04T00:49:04.578Z
 *  license: MIT
 */

!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t,n,e){return t(e={path:n,exports:{},require:function(t,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==n&&e.path)}},e.exports),e.exports}function e(t){if(t.__esModule)return t;var n=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(e){var i=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,i.get?i:{enumerable:!0,get:function(){return t[e]}})})),n}var i=n((function(n,e){(function(){var i,r,o,s,a,c,u="object"==typeof t&&t&&t.Object===Object&&t,_="object"==typeof self&&self&&self.Object===Object&&self,f=u||_||Function("return this")(),h=e&&!e.nodeType&&e,l=h&&n&&!n.nodeType&&n,p=f.nx=f.nx||{BREAKER:{},VERSION:"2.6.0",DEBUG:!1,GLOBAL:f};l?((l.exports=p).nx=p,h.nx=p):f.nx=p,i=Array.prototype,r=Object.prototype.hasOwnProperty,o=/\[(\w+)\]/g,p.noop=function(){},p.stubTrue=function(){return!0},p.stubFalse=function(){return!1},p.stubValue=function(t){return t},p.error=function(t){throw new Error(t)},p.try=function(t){try{t()}catch(t){}},p.forEach=function(t,n,e){var i,r=t.length;for(i=0;i<r&&n.call(e,t[i],i,t)!==p.BREAKER;i++);},p.forIn=function(t,n,e){var i;for(i in t)if(r.call(t,i)&&n.call(e,i,t[i],t)===p.BREAKER)break},p.each=function(t,n,e){var i,o,s=function(i,r,o){return n.call(e,i,r,t,o)===p.BREAKER};if(t)if("number"==typeof(o=t.length))for(i=0;i<o&&!s(i,t[i],!0);i++);else for(i in t)if(r.call(t,i)&&s(i,t[i],!1))break},p.map=function(t,n,e){var i=[];return p.each(t,(function(){var t=n.apply(e,arguments);if(t===p.BREAKER)return p.BREAKER;i.push(t)})),i},p.mix=function(t){var n,e,i=t||{},r=arguments;for(n=1,e=r.length;n<e;n++)p.forIn(r[n],(function(t,n){i[t]=n}));return i},p.slice=function(t,n,e){return i.slice.call(t,n,e)},p.set=function(t,n,e){for(var i=n.replace(o,"$1").split("."),r=t||p.GLOBAL,s=i.length-1,a=i[s],c=0;c<s;c++){var u=i[c],_=isNaN(+i[c+1])?{}:[];r=r[u]=r[u]||_}return r[a]=e,t},p.get=function(t,n,e){if(!n)return t;var i=n.replace(o,".$1").split("."),r=t||p.GLOBAL;return i.forEach((function(t){r=r&&r[t]})),void 0!==e&&null==r?e:r},p.path=function(t,n,e){return null==e?this.get(t,n):this.set(t,n,e)},s=function(){},a={__class_id__:0,__type__:"nx.RootClass",__base__:Object,__meta__:{},__static__:!1,__statics__:{},__properties__:{},__methods__:{},__method_init__:p.noop,__static_init__:p.noop},c={base:function(){var t,n=this.base.caller;if(n&&(t=n.__base__))return t.apply(this,arguments)},parent:function(t){var n=void 0===this.__id__,e=p.slice(arguments,1),i=n?this.__base__:this.__base__.prototype,r=this["@"+t].__type__,o=["get","set"][e.length];switch(r){case"method":return i[t].apply(this,e);case"property":return i["@"+t][o].apply(this,e)}}},a.__methods__=s.prototype=p.mix({constructor:s,init:p.noop,destroy:p.noop,toString:function(){return"[Class@"+this.__type__+"]"}},c),p.mix(a.__statics__,c),p.mix(s,a),p.mix(s,a.__statics__),p.RootClass=s,p.defineProperty=function(t,n,e,i){var r,o,s,a,c,u="@"+n,_=e&&"object"==typeof e?e:{value:e};return"value"in _?(a=_.value,c="_"+n,r=function(){return c in this?this[c]:"function"==typeof a?a.call(this):a},o=function(t){this[c]=t}):(r=e.get||t[u]&&t[u].get||p.noop,o=e.set||t[u]&&t[u].set||p.noop),u in t&&(r.__base__=t[u].get,o.__base__=t[u].set),s=t[u]={__meta__:e,__name__:n,__type__:"property",__static__:!!i,get:r,set:o,configurable:!0},Object.defineProperty(t,n,s),s},p.defineMethod=function(t,n,e,i){var r="@"+n;return t[n]=e,t[r]={__meta__:e,__name__:n,__type__:"method",__static__:!!i}},p.defineBombMethod=function(t,n,e,i){n.split(",").forEach((function(n,r){p.defineMethod(t,n,e.call(t,n,r),i)}))},p.defineMembers=function(t,n,e,i){p.forIn(e,(function(e,r){e.indexOf(",")>-1?p.defineBombMethod(n,e,r,i):p["define"+t](n,e,r,i)}))},function(){var t=1,n=0,e="nx.Anonymous";function i(t,n){this.type=t,this.meta=n,this.base=n.extends||p.RootClass,this.$base=this.base.prototype,this.__class_meta__={},this.__class__=null,this.__constructor__=null}i.prototype={constructor:i,initMetaProcessor:function(){var n=this.meta,e=n.methods||{},i=n.statics||{};p.mix(this.__class_meta__,{__type__:this.type,__meta__:n,__base__:this.base,__class_id__:t++,__method_init__:e.init||this.base.__method_init__,__static_init__:i.init||this.base.__static_init__,__static__:!n.methods&&!!n.statics})},createClassProcessor:function(){var t=this;this.__class__=function(){this.__id__=n++,t.__constructor__.apply(this,arguments),t.registerDebug(this)}},inheritProcessor:function(){var t=this.__class_meta__;this.inheritedClass(t),this.defineMethods(t,!0),this.defineMethods(t,!1),this.defineProperties(t)},inheritedClass:function(t){var n=function(){},e=this.__class__;n.prototype=this.$base,e.prototype=new n,e.prototype.$base=this.$base,e.prototype.constructor=e},defineMethods:function(t,n){var e=n?"statics":"methods",i="__"+e+"__",r=n?this.__class__:this.__class__.prototype,o=(n?this.base:this.base.prototype)[i]||{};p.forIn(this.meta[e],(function(t,n){o[t]&&"function"==typeof n&&(n.__base__=o[t])})),r[i]=p.mix(t[i],o,this.meta[e]),p.defineMembers("Method",r,r[i],n)},defineProperties:function(t){var n=t.__static__,e=n?this.__class__:this.__class__.prototype;e.__properties__=p.mix(t.__properties__,this.meta.properties),p.defineMembers("Property",e,e.__properties__,n)},methodsConstructorProcessor:function(){var t=this.__class_meta__;this.__constructor__=function(){t.__method_init__.apply(this,arguments)}},staticsConstructorProcessor:function(){this.__class_meta__.__static_init__.call(this.__class__)},registerProcessor:function(){var t=this.__class__,n=this.type,i=this.__class_meta__;p.mix(t.prototype,i),p.mix(t,i),-1===n.indexOf(e)&&p.set(p.GLOBAL,n,t)},registerDebug:function(t){p.DEBUG&&(p.set(p,"__instances__."+(n-1),t),p.set(p,"__instances__.length",n))}},p.declare=function(n,r){var o=new i("string"==typeof n?n:e+t,r||n);return o.initMetaProcessor(),o.createClassProcessor(),o.inheritProcessor(),o.methodsConstructorProcessor(),o.staticsConstructorProcessor(),o.registerProcessor(),o.__class__}}()}).call(t)})),r=n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i,r=["GM_addStyle","GM_deleteValue","GM_listValues","GM_addValueChangeListener","GM_removeValueChangeListener","GM_setValue","GM_getValue","GM_log","GM_getResourceText","GM_getResourceURL","GM_registerMenuCommand","GM_unregisterMenuCommand","GM_openInTab","GM_xmlhttpRequest","GM_download","GM_getTab","GM_saveTab","GM_getTabs","GM_notification","GM_setClipboard","GM_info"],o=e.declare("nx.GmApi",{statics:{version:"4.10.0",generate:function(t){var n={};return r.forEach((function(e){var i=e.split("_")[1];this[i]=n[i]=t[e]}),this),n}}});t.exports&&(t.exports=o)}()})),o=(n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i;e.json=JSON,e.parse=function(t){try{return JSON.parse(t)}catch(t){}return t},e.stringify=function(t){try{return JSON.stringify(t)}catch(t){}return t},t.exports&&(t.exports={json:e.json,parse:e.parse,stringify:e.stringify})}()})),n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i;e.slice2str=function(t,n,e){if(t||!(t.length<=n)){var i=e||0;return[t.substr(0,n),t.substr(n+i)]}},t.exports&&(t.exports=e.slice2str)}()})),n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i,r="@";e.json;e.slice2str;var o=e.declare("nx.AbstractStorage",{methods:{init:function(t){this.engine=t.engine,this.prefix=t.prefix||"",this.options=t,this.setAccessor()},setAccessor:function(){this.accessor={get:this.options.get||"getItem",set:this.options.set||"setItem",remove:this.options.remove||"removeItem",clear:this.options.clear||"clear"}},serialize:function(t){return e.stringify(t)},deserialize:function(t){return e.parse(t)},set:function(t,n){var i=t.indexOf(".");if(i>-1){var r=e.slice2str(t,i,1),o=this.get(r[0])||{};e.set(o,r[1],n),this.set(r[0],o)}else this.engine[this.accessor.set](this.__key(t),this.serialize(n))},sets:function(t){e.each(t,(function(t,n){this.set(t,n)}),this)},get:function(t){var n=t.indexOf(".");if(n>-1){var i=e.slice2str(t,n,1),r=this.get(i[0])||{};return e.get(r,i[1])}var o=this.engine[this.accessor.get](this.__key(t));return this.deserialize(o)},gets:function(t){var n={},i=this.__keys(t);return e.each(i,(function(t,e){n[e]=this.get(e)}),this),n},del:function(t){this.engine[this.accessor.remove](this.__key(t))},dels:function(t){var n=this.__keys(t);e.each(n,(function(t,n){this.del(n)}),this)},clear:function(){this.engine[this.accessor.clear]()},keys:function(){return Object.keys(this.engine)},__key:function(t){var n=this.prefix;return n?[n,r,t].join(""):t},__keys:function(t){var n,i,o=[];return Array.isArray(t)?t:(i=this.keys(),n=this.prefix.length+1,e.each(i,(function(t,e){this.prefix&&0===e.indexOf(this.prefix+r)&&o.push(e.slice(n))}),this),o.length?o:i)}}});t.exports&&(t.exports=o)}()}))),s=n((function(t){!function(){var n=n||this||window||Function("return this")(),e=(n.nx||i).declare("nx.GmStoreEngine",{statics:{setItem:function(t,n){return GM_setValue(t,n)},getItem:function(t){return GM_getValue(t)},removeItem:function(t){GM_deleteValue(t)},clear:function(){GM_listValues().forEach((function(t){this.removeItem(t)}),this)}}});t.exports&&(t.exports=e)}()})),a=n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i,r=e.AbstractStorage||o,a=e.GmStoreEngine||s,c=e.declare("nx.GmStorage",{extends:r,methods:{init:function(t){this.base({engine:a,prefix:t||""})},serialize:function(t){return t},keys:function(){return GM_listValues()}}});t.exports&&(t.exports=c)}()})),c=n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i,r=function(t,n){return encodeURIComponent(t)+"="+encodeURIComponent(n)};e.param=function(t,n,i){var o,s=i||r,a=[];return e.forIn(t,(function(t,n){if(null!=n){var e=Array.isArray(n)?n.join():n;a.push(s(t,e))}})),o=a.join("&"),n?o?n+"?"+o:n:o},t.exports&&(t.exports=e.param)}()})),u=n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i,r=e.param||c,o=e.declare("nx.DataTransform",{statics:{raw:function(t){return t},json:function(t){return JSON.stringify(t)},urlencoded:function(t){return r(t)},multipart:function(t){var n=new FormData;return e.forIn(t,(function(t,e){n.append(t,e)})),n}}});t.exports&&(t.exports=o)}()})),_=n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i;e.stubSingleton=function(){return{instance:null,getInstance:function(){var t=[null].concat(e.slice(arguments));if(!this.instance){var n=Function.prototype.bind.apply(this,t);this.instance=new n}return this.instance}}},t.exports&&(t.exports=e.stubSingleton)}()})),f=n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i;e.delete=function(t,n){return(n&&0!==n.length?n:Object.keys(t)).forEach((function(n){delete t[n]})),t},t.exports&&(t.exports=e.delete)}()})),h=n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i,r=e.delete||f,o={method:"get"},s=["method","url","data"];e.parseRequestArgs=function(t,n){var i=t,a=null;switch(i.length){case 1:a="string"==typeof i[0]?{url:i[0]}:i[0];break;case 2:a=e.mix({url:i[0]},i[1]);break;case 3:a=e.mix({method:i[0],url:i[1]},i[2]);break;case 4:a=e.mix({method:i[0],url:i[1],data:i[2]},i[3]);break;default:a=null,e.error("The arguments.length should between 1 ~ 4.")}return a=e.mix(null,o,a),n?[a.method,a.url,a.data,r(a,s)]:a},t.exports&&(t.exports=e.parseRequestArgs)}()})),l=n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i,r=e.stubSingleton||_,o=e.parseArgs||h,s=e.declare("nx.AbstractRequest",{statics:e.mix(null,r()),methods:{init:function(t){this.options=e.mix(null,this.defaults(),t)},defaults:function(){return null},request:function(t,n,i,r){e.error("Must be implement.")},"get,post,put,patch,delete,head":function(t){return function(){var n=[t].concat(e.slice(arguments)),i=o(n,!0);return this.request.apply(this,i)}}}});t.exports&&(t.exports=s)}()})),p=n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i,r={raw:"application/x-www-form-urlencoded",urlencoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",json:"application/json;charset=utf-8",plain:"text/plain"};e.contentType=function(t){return r[t]||r.raw},t.exports&&(t.exports=e.contentType)}()}));function d(t){return!0==(null!=(n=t)&&"object"==typeof n&&!1===Array.isArray(n))&&"[object Object]"===Object.prototype.toString.call(t);var n}var m=e(Object.freeze({__proto__:null,default:function(t){var n,e;return!1!==d(t)&&("function"==typeof(n=t.constructor)&&(!1!==d(e=n.prototype)&&!1!==e.hasOwnProperty("isPrototypeOf")))}})),x=n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i,r=n.isPlainObject||m,o=Object.prototype.toString;function s(t,n){e.forIn(n,(function(n,e){var i=o.call(e);switch(!0){case r(e):t[n]=t[n]||{},s(t[n],e);break;case"[object Undefined]"===i:break;default:t[n]=e}}))}e.deepAssign=function(t){var n=e.slice(arguments,1),i=t||{};return n.forEach((function(t){s(i,t)})),i},t.exports&&(t.exports=e.deepAssign)}()})),y=n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i,r={joinKey:",",encode:encodeURIComponent,isEmpty:function(t){return null!=t},transform:function(t,n){return this.encode(t)+"="+this.encode(n)}};e.param=function(t,n,i){var o,s=e.mix(null,r,i),a=[];return e.forIn(t,(function(t,n){if(s.isEmpty(n)){var e=Array.isArray(n)?n.join(s.joinKey):n;a.push(s.transform(t,e))}})),o=a.join("&"),n?o?n+"?"+o:n:o},t.exports&&(t.exports=e.param)}()})),g=n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i,r=e.DataTransform||u,o=e.AbstractRequest||l,s=e.contentType||p,a=e.deepAssign||x,c=e.param||y,_={dataType:"json",responseType:"json"},f=e.declare("nx.GmXhr",{extends:o,methods:{defaults:function(){return _},request:function(t,n,i,o){var u=e.mix(null,this.options,o),_="get"===t,f=_?null:r[u.dataType](i),h=_?c(i,n):n,l={"Content-Type":s(u.dataType)},p=a({method:t,data:f,headers:l},u);return new Promise((function(t,n){GM_xmlhttpRequest(e.mix({url:h,onload:function(n){t(n.response)},onerror:function(t){n(t)},onabort:function(t){n(t)},ontimeout:function(t){n(t)}},p))}))}}});t.exports&&(t.exports=f)}()})),v=(n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i;e.rangeDate=function(t,n,e){for(var i=new Date(t),r=new Date(n),o=[],s=i;s<=r;s.setDate(s.getDate()+1)){var a=e?s.toJSON():new Date(s);o.push(a)}return o},t.exports&&(t.exports=e.rangeDate)}()})),n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i;e.sum=function(t,n){var i=function(t){switch(typeof t){case"string":return function(n,i){return e.get(i,t)};case"function":return t;default:return function(t,n){return n}}}(n);return t.reduce((function(t,n,e,r){return t+i(e,n,r)}),0)},t.exports&&(t.exports=e.sum)}()})),n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i,r=function(t){return(""+t).padStart(2,"0")};e.timeFormat=function(t){var n=parseInt(t%1e3/100),e=Math.floor(t/1e3%60),i=Math.floor(t/6e4%60),o=Math.floor(t/36e5%24);return{hour:o,minute:i,second:e,millisecond:n,datetime:[r(o),r(i),r(e)].join(":")}},t.exports&&(t.exports=e.timeFormat)}()})),n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i;e.waitToDisplay=function(t,n,i){var r=document.querySelector(t);if(null!=r)return i(r);setTimeout((function(){e.waitToDisplay(t,n,i)}),n)},t.exports&&(t.exports=e.waitToDisplay)}()})),n((function(t){!function(){var n=n||this||window||Function("return this")(),e=n.nx||i;e.mapMap=function(t,n,i){var r={};return e.each(t,(function(e,o){var s=n.call(i,e,o,t);r[s.key]=s.value}),i),r},t.exports&&(t.exports=e.mapMap)}()})),g.getInstance()),b=r.generate(i.GLOBAL),w=new a("aric");i.declare({statics:{init:function(){this.nx(),i.mix(unsafeWindow,{$:i.mix(unsafeWindow.$,{version:$.fn.jquery}),gmsdk:this.sdk()})},nx:function(){!unsafeWindow.nx&&(unsafeWindow.nx=i)},sdk:function(){return i.mix({version:"1.1.8",http:v,store:w},b)}}})}));
